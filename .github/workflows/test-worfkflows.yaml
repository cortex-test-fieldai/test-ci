name: Test All Runner Labels

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]
  workflow_dispatch:  # Allow manual triggering

jobs:
  # Test standard CPU runners
  test-ci-cpu:
    runs-on: ci-cpu
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
      
      - name: Test runner environment
        run: |
          echo "üñ•Ô∏è  Testing ci-cpu runner"
          echo "Runner name: $RUNNER_NAME"
          echo "Runner OS: $RUNNER_OS"
          echo "Runner architecture: $RUNNER_ARCH"
          echo "Available CPU cores: $(nproc)"
          echo "Available memory: $(free -h)"
          echo "Disk space: $(df -h /)"
          
      - name: Test Docker availability
        run: |
          echo "üê≥ Testing Docker in ci-cpu runner"
          docker --version
          docker info
          docker run --rm hello-world

          
      - name: Test ROS image
        run: |
          echo "ü§ñ Testing ROS image"
          docker run --rm test-ros-image
